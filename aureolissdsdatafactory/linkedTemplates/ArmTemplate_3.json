{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "aureolissdsdatafactory"
		},
		"Azure_folder_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'Azure_folder'"
		},
		"FileServer1_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'FileServer1'"
		},
		"FileServer2_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'FileServer2'"
		},
		"Share_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'Share'"
		},
		"sdsirserver_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sdsirserver'"
		},
		"Azure_folder_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Users\\mantijaa\\Desktop\\SDS"
		},
		"Azure_folder_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "jaakko.mantila@aureolis.com"
		},
		"FileServer1_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Users\\sihvohan\\SDS"
		},
		"FileServer1_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hannu.sihvonen@aureolis.com"
		},
		"FileServer2_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Users\\sihvohan\\SDS"
		},
		"FileServer2_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "hannu.sihvonen@aureolis.com"
		},
		"Share_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\Users\\mantijaa\\Aureolis Oy\\ULT - Kesätiimi 2019 - Smart Data Service"
		},
		"Share_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "jaakko.mantila@aureolis.com"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/jsontocsv')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "DataLake_GEN1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileSystem": "newcontainer"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": false,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Kakkonen Kaapo;16;21.12.2003;.;.;.;798993;Stara;4.7.2019;Helsinki;Superstara;7.7.2020;Tallinna;.;.;.;Ykk�nen Iso;Takajalantie 2 B 39 81980 Lavitsa;047-223332;Vitonen Lulu;Poutapilvenkuja 1 81990 Hattara;047-333333;Hankalampi",
						"type": "String"
					},
					{
						"name": " 2.7.2019;Tallinna;Helsinki;.",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/omakotitalo_currated')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "DataLake_GEN1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileSystem": "curated"
					},
					"columnDelimiter": ";",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"nullValue": ".",
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Aluejako",
						"type": "String"
					},
					{
						"name": "Neliohinta_2015",
						"type": "String"
					},
					{
						"name": "Keskipinta_ala_2015",
						"type": "String"
					},
					{
						"name": "Kauppojen_lukumaara_2015",
						"type": "String"
					},
					{
						"name": "Neliohinta_2016",
						"type": "String"
					},
					{
						"name": "Keskipinta_ala_2016",
						"type": "String"
					},
					{
						"name": "Kauppojen_lukumaara_2016",
						"type": "String"
					},
					{
						"name": "Neliohinta_2017",
						"type": "String"
					},
					{
						"name": "Keskipinta_ala_2017",
						"type": "String"
					},
					{
						"name": "Kauppojen_lukumaara_2017",
						"type": "String"
					},
					{
						"name": "Neliohinta_2018",
						"type": "String"
					},
					{
						"name": "Keskipinta_ala_2018",
						"type": "String"
					},
					{
						"name": "Kauppojen_lukumaara_2018",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/output1')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "DataLake_GEN1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "output1.csv",
						"fileSystem": "realestatedata1"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"nullValue": ".",
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Scored Label Mean",
						"type": "String"
					},
					{
						"name": "Scored Label Standard Deviation",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/pandas')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "DataLake_GEN1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "pandas.csv",
						"fileSystem": "realestatedata1"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Prop_0",
						"type": "String"
					},
					{
						"name": "Postinumero",
						"type": "String"
					},
					{
						"name": "Talotyyppi",
						"type": "String"
					},
					{
						"name": "Rakennusvuosi",
						"type": "String"
					},
					{
						"name": "Vuosi",
						"type": "String"
					},
					{
						"name": "Neliohinta",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/tp_tilasto_proj_hidas')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "tp_tilasto_proj_hidas_muok.csv",
						"container": "tyopaikkaprojektio"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Toimiala",
						"type": "String"
					},
					{
						"name": "Tol",
						"type": "String"
					},
					{
						"name": "Tyyppi",
						"type": "String"
					},
					{
						"name": "Vuosi",
						"type": "String"
					},
					{
						"name": "Uusimaa",
						"type": "String"
					},
					{
						"name": "Hel",
						"type": "String"
					},
					{
						"name": "Esp",
						"type": "String"
					},
					{
						"name": "Van",
						"type": "String"
					},
					{
						"name": "Kau",
						"type": "String"
					},
					{
						"name": "PKS",
						"type": "String"
					},
					{
						"name": "Hyv",
						"type": "String"
					},
					{
						"name": "Jar",
						"type": "String"
					},
					{
						"name": "Ker",
						"type": "String"
					},
					{
						"name": "Kir",
						"type": "String"
					},
					{
						"name": "Man",
						"type": "String"
					},
					{
						"name": "Nur",
						"type": "String"
					},
					{
						"name": "Por",
						"type": "String"
					},
					{
						"name": "Sip",
						"type": "String"
					},
					{
						"name": "Tuu",
						"type": "String"
					},
					{
						"name": "Vih",
						"type": "String"
					},
					{
						"name": "Kehys",
						"type": "String"
					},
					{
						"name": "Raas",
						"type": "String"
					},
					{
						"name": "Lohj",
						"type": "String"
					},
					{
						"name": "Lovi",
						"type": "String"
					},
					{
						"name": "Porv",
						"type": "String"
					},
					{
						"name": "Riih",
						"type": "String"
					},
					{
						"name": "Uusimaa_p",
						"type": "String"
					},
					{
						"name": "Hel_p",
						"type": "String"
					},
					{
						"name": "Esp_p",
						"type": "String"
					},
					{
						"name": "Van_p",
						"type": "String"
					},
					{
						"name": "Kau_p",
						"type": "String"
					},
					{
						"name": "PKS_p",
						"type": "String"
					},
					{
						"name": "Hyv_p",
						"type": "String"
					},
					{
						"name": "Jar_p",
						"type": "String"
					},
					{
						"name": "Ker_p",
						"type": "String"
					},
					{
						"name": "Kir_p",
						"type": "String"
					},
					{
						"name": "Man_p",
						"type": "String"
					},
					{
						"name": "Nur_p",
						"type": "String"
					},
					{
						"name": "Por_p",
						"type": "String"
					},
					{
						"name": "Sip_p",
						"type": "String"
					},
					{
						"name": "Tuu_p",
						"type": "String"
					},
					{
						"name": "Vih_p",
						"type": "String"
					},
					{
						"name": "Kehys_p",
						"type": "String"
					},
					{
						"name": "Raas_p",
						"type": "String"
					},
					{
						"name": "Lohj_p",
						"type": "String"
					},
					{
						"name": "Lovi_p",
						"type": "String"
					},
					{
						"name": "Porv_p",
						"type": "String"
					},
					{
						"name": "Riih_p",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/tp_tilasto_proj_nopea')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "tp_tilasto_proj_nopea_muok.csv",
						"container": "tyopaikkaprojektio"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Toimiala",
						"type": "String"
					},
					{
						"name": "Tol",
						"type": "String"
					},
					{
						"name": "Tyyppi",
						"type": "String"
					},
					{
						"name": "Vuosi",
						"type": "String"
					},
					{
						"name": "Uusimaa",
						"type": "String"
					},
					{
						"name": "Hel",
						"type": "String"
					},
					{
						"name": "Esp",
						"type": "String"
					},
					{
						"name": "Van",
						"type": "String"
					},
					{
						"name": "Kau",
						"type": "String"
					},
					{
						"name": "PKS",
						"type": "String"
					},
					{
						"name": "Hyv",
						"type": "String"
					},
					{
						"name": "Jar",
						"type": "String"
					},
					{
						"name": "Ker",
						"type": "String"
					},
					{
						"name": "Kir",
						"type": "String"
					},
					{
						"name": "Man",
						"type": "String"
					},
					{
						"name": "Nur",
						"type": "String"
					},
					{
						"name": "Por",
						"type": "String"
					},
					{
						"name": "Sip",
						"type": "String"
					},
					{
						"name": "Tuu",
						"type": "String"
					},
					{
						"name": "Vih",
						"type": "String"
					},
					{
						"name": "Kehys",
						"type": "String"
					},
					{
						"name": "Raas",
						"type": "String"
					},
					{
						"name": "Lohj",
						"type": "String"
					},
					{
						"name": "Lovi",
						"type": "String"
					},
					{
						"name": "Porv",
						"type": "String"
					},
					{
						"name": "Riih",
						"type": "String"
					},
					{
						"name": "Uusimaa_p",
						"type": "String"
					},
					{
						"name": "Hel_p",
						"type": "String"
					},
					{
						"name": "Esp_p",
						"type": "String"
					},
					{
						"name": "Van_p",
						"type": "String"
					},
					{
						"name": "Kau_p",
						"type": "String"
					},
					{
						"name": "PKS_p",
						"type": "String"
					},
					{
						"name": "Hyv_p",
						"type": "String"
					},
					{
						"name": "Jar_p",
						"type": "String"
					},
					{
						"name": "Ker_p",
						"type": "String"
					},
					{
						"name": "Kir_p",
						"type": "String"
					},
					{
						"name": "Man_p",
						"type": "String"
					},
					{
						"name": "Nur_p",
						"type": "String"
					},
					{
						"name": "Por_p",
						"type": "String"
					},
					{
						"name": "Sip_p",
						"type": "String"
					},
					{
						"name": "Tuu_p",
						"type": "String"
					},
					{
						"name": "Vih_p",
						"type": "String"
					},
					{
						"name": "Kehys_p",
						"type": "String"
					},
					{
						"name": "Raas_p",
						"type": "String"
					},
					{
						"name": "Lohj_p",
						"type": "String"
					},
					{
						"name": "Lovi_p",
						"type": "String"
					},
					{
						"name": "Porv_p",
						"type": "String"
					},
					{
						"name": "Riih_p",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/tp_tilasto_proj_perus')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorage1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "tp_tilasto_proj_perus_muok.csv",
						"container": "tyopaikkaprojektio"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "Toimiala",
						"type": "String"
					},
					{
						"name": "Tol",
						"type": "String"
					},
					{
						"name": "Tyyppi",
						"type": "String"
					},
					{
						"name": "Vuosi",
						"type": "String"
					},
					{
						"name": "Uusimaa",
						"type": "String"
					},
					{
						"name": "Hel",
						"type": "String"
					},
					{
						"name": "Esp",
						"type": "String"
					},
					{
						"name": "Van",
						"type": "String"
					},
					{
						"name": "Kau",
						"type": "String"
					},
					{
						"name": "PKS",
						"type": "String"
					},
					{
						"name": "Hyv",
						"type": "String"
					},
					{
						"name": "Jar",
						"type": "String"
					},
					{
						"name": "Ker",
						"type": "String"
					},
					{
						"name": "Kir",
						"type": "String"
					},
					{
						"name": "Man",
						"type": "String"
					},
					{
						"name": "Nur",
						"type": "String"
					},
					{
						"name": "Por",
						"type": "String"
					},
					{
						"name": "Sip",
						"type": "String"
					},
					{
						"name": "Tuu",
						"type": "String"
					},
					{
						"name": "Vih",
						"type": "String"
					},
					{
						"name": "Kehys",
						"type": "String"
					},
					{
						"name": "Raas",
						"type": "String"
					},
					{
						"name": "Lohj",
						"type": "String"
					},
					{
						"name": "Lovi",
						"type": "String"
					},
					{
						"name": "Porv",
						"type": "String"
					},
					{
						"name": "Riih",
						"type": "String"
					},
					{
						"name": "Uusimaa_p",
						"type": "String"
					},
					{
						"name": "Hel_p",
						"type": "String"
					},
					{
						"name": "Esp_p",
						"type": "String"
					},
					{
						"name": "Van_p",
						"type": "String"
					},
					{
						"name": "Kau_p",
						"type": "String"
					},
					{
						"name": "PKS_p",
						"type": "String"
					},
					{
						"name": "Hyv_p",
						"type": "String"
					},
					{
						"name": "Jar_p",
						"type": "String"
					},
					{
						"name": "Ker_p",
						"type": "String"
					},
					{
						"name": "Kir_p",
						"type": "String"
					},
					{
						"name": "Man_p",
						"type": "String"
					},
					{
						"name": "Nur_p",
						"type": "String"
					},
					{
						"name": "Por_p",
						"type": "String"
					},
					{
						"name": "Sip_p",
						"type": "String"
					},
					{
						"name": "Tuu_p",
						"type": "String"
					},
					{
						"name": "Vih_p",
						"type": "String"
					},
					{
						"name": "Kehys_p",
						"type": "String"
					},
					{
						"name": "Raas_p",
						"type": "String"
					},
					{
						"name": "Lohj_p",
						"type": "String"
					},
					{
						"name": "Lovi_p",
						"type": "String"
					},
					{
						"name": "Porv_p",
						"type": "String"
					},
					{
						"name": "Riih_p",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/vuokra')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "Vuosineljannes",
						"type": "nvarchar"
					},
					{
						"name": "Alue",
						"type": "nvarchar"
					},
					{
						"name": "Huoneluku",
						"type": "nvarchar"
					},
					{
						"name": "Rahoitusmuoto",
						"type": "nvarchar"
					},
					{
						"name": "Lukumaara",
						"type": "nvarchar"
					},
					{
						"name": "Neliovuokra",
						"type": "nvarchar"
					},
					{
						"name": "Vuosi",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Paivitetty_pvm",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					}
				],
				"typeProperties": {
					"tableName": "[[dbo].[Vuokrahinnat_2015Q1_2018Q1]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/vuokrahinnat_2010_2018_BU')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "Postinumero",
						"type": "nvarchar"
					},
					{
						"name": "Alue",
						"type": "nvarchar"
					},
					{
						"name": "Kaupunki",
						"type": "nvarchar"
					},
					{
						"name": "Talotyyppi",
						"type": "nvarchar"
					},
					{
						"name": "Rakennusvuosi",
						"type": "nvarchar"
					},
					{
						"name": "Neliohinta_2015",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2015",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2016",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2016",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2017",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2017",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2018",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2018",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2010",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2010",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2011",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2011",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2012",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2012",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2013",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2013",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta_2014",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara_2014",
						"type": "int",
						"precision": 10
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "Osakeasuntojen_hinnat_2010_2018_BU"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/vuokrahinnat_sink')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase1",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "Postinumero",
						"type": "nvarchar"
					},
					{
						"name": "Alue",
						"type": "nvarchar"
					},
					{
						"name": "Kaupunki",
						"type": "nvarchar"
					},
					{
						"name": "Talotyyppi",
						"type": "nvarchar"
					},
					{
						"name": "Rakennusvuosi",
						"type": "nvarchar"
					},
					{
						"name": "Vuosi",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Neliohinta",
						"type": "decimal",
						"precision": 20,
						"scale": 2
					},
					{
						"name": "Kauppojen_lukumaara",
						"type": "int",
						"precision": 10
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "Osakeasuntojen_hinnat_2010_2018_UP"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Azure_folder')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Azure_folder_properties_typeProperties_host')]",
					"userId": "[parameters('Azure_folder_properties_typeProperties_userId')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('Azure_folder_password')]"
					}
				},
				"connectVia": {
					"referenceName": "SDS-IR-mantijaa",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/FileServer1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('FileServer1_properties_typeProperties_host')]",
					"userId": "[parameters('FileServer1_properties_typeProperties_userId')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('FileServer1_password')]"
					}
				},
				"connectVia": {
					"referenceName": "integrationRuntime1",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/FileServer2')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Hannu",
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('FileServer2_properties_typeProperties_host')]",
					"userId": "[parameters('FileServer2_properties_typeProperties_userId')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('FileServer2_password')]"
					}
				},
				"connectVia": {
					"referenceName": "integrationRuntime1",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Share')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('Share_properties_typeProperties_host')]",
					"userId": "[parameters('Share_properties_typeProperties_userId')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('Share_password')]"
					}
				},
				"connectVia": {
					"referenceName": "SDS-IR-mantijaa",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sdsirserver')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('sdsirserver_connectionString')]"
				},
				"connectVia": {
					"referenceName": "SDS-IR-mantijaa",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/pipeline2')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "GetDataFromPxnet2",
						"type": "WebActivity",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": "http://pxnet2.stat.fi/PXWeb/api/v1/fi/StatFin/asu/asvu/statfin_asvu_pxt_11x5.px",
							"method": "POST",
							"headers": {
								"Accept-Encoding": "UTF-8"
							},
							"body": {
								"query": [],
								"response": {
									"format": "json-stat"
								}
							},
							"datasets": [
								{
									"referenceName": "Vuokra_csv_2",
									"type": "DatasetReference",
									"parameters": {}
								}
							]
						}
					},
					{
						"name": "SaveJsonToCsv",
						"type": "DatabricksNotebook",
						"dependsOn": [
							{
								"activity": "GetDataFromPxnet2",
								"dependencyConditions": [
									"Succeeded"
								]
							}
						],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"notebookPath": "/Vuokrahinnat_2015Q1_Alkaen_Tilastokeskus",
							"baseParameters": {
								"jsoncontent": {
									"value": "@string(activity('GetDataFromPxnet2').output)",
									"type": "Expression"
								},
								"storageaccountname": "aureolissdsdatalakegen1",
								"storageaccountaccesskey": "uRbvlw1Sve+C5k8xwfxsowf5DpoccyRUyJ+hdsxrD7oQk5D8QBCnhKNKAF5XiyH29vi/PJSxh9NZKBUBBEGQOA==",
								"containername": "realestatedata1",
								"filename": "Vuokrahinnat_2015Q1_Alkaen.csv"
							}
						},
						"linkedServiceName": {
							"referenceName": "SDS_DataBricks_North",
							"type": "LinkedServiceReference"
						}
					}
				],
				"variables": {
					"jsoncontent": {
						"type": "String"
					}
				},
				"annotations": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/pipeline3')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "Copy_httpdata_to_json",
						"type": "Copy",
						"dependsOn": [],
						"policy": {
							"timeout": "0.00:50:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"source": {
								"type": "RestSource",
								"httpRequestTimeout": "00:01:40",
								"requestInterval": "00.00:00:00.010",
								"requestMethod": "GET"
							},
							"sink": {
								"type": "JsonSink",
								"storeSettings": {
									"type": "AzureBlobStorageWriteSettings"
								},
								"formatSettings": {
									"type": "JsonWriteSettings",
									"quoteAllText": true
								}
							},
							"enableStaging": false
						},
						"inputs": [
							{
								"referenceName": "RestResource1",
								"type": "DatasetReference",
								"parameters": {}
							}
						],
						"outputs": [
							{
								"referenceName": "Json1",
								"type": "DatasetReference",
								"parameters": {}
							}
						]
					}
				],
				"annotations": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Share')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "Share",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "FileServerLocation",
						"folderPath": "Source_Data"
					},
					"columnDelimiter": ";",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"nullValue": ".",
					"quoteChar": "\""
				},
				"schema": []
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/Share')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/TaajamaAste')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "FileServer2",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "FileServerLocation",
						"fileName": "vaerak_025_201700_taajama_aste_kunnittain.csv"
					},
					"columnDelimiter": ";",
					"encodingName": "ISO-8859-15",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"type": "String"
					},
					{
						"type": "String"
					}
				]
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/FileServer2')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Aluedata_flow')]",
			"type": "Microsoft.DataFactory/factories/dataflows",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "MappingDataFlow",
				"typeProperties": {
					"sources": [
						{
							"dataset": {
								"referenceName": "DelimitedText4",
								"type": "DatasetReference"
							},
							"name": "source1"
						}
					],
					"sinks": [
						{
							"dataset": {
								"referenceName": "AzureSqlTable1",
								"type": "DatasetReference"
							},
							"name": "sink1"
						}
					],
					"transformations": [],
					"script": "source(output(\n\t\tPostinumeroalue as string,\n\t\t{Postinumeroalueen nimi} as string,\n\t\t{Postinumeroalueen nimi (sv)} as string,\n\t\tKunta as string,\n\t\t{Kunnan nimi} as string,\n\t\t{Kunnan nimi (sv)} as string,\n\t\tKuntaryhma as string,\n\t\t{Kuntaryhman nimi} as string,\n\t\tSeutukunta as string,\n\t\t{Seutukunnan nimi} as string,\n\t\tMaakunta as string,\n\t\t{Maakunnan nimi} as string,\n\t\tSuuralue as string,\n\t\t{Suuralueen nimi} as string,\n\t\tAVI as string,\n\t\t{AVI:n nimi} as string,\n\t\tELY as string,\n\t\t{ELY:n nimi} as string,\n\t\t{NUTS 1} as string,\n\t\t{NUTS 1 nimi} as string,\n\t\t{NUTS 2} as string,\n\t\t{NUTS 2 nimi} as string,\n\t\t{NUTS 3} as string,\n\t\t{NUTS 3 nimi} as string,\n\t\tSairaanhoitopiiri as string,\n\t\t{Sairaanhoitopiirin nimi} as string,\n\t\tVaalipiiri as string,\n\t\t{Vaalipiirin nimi} as string,\n\t\tHovioikeus as string,\n\t\t{Hovioikeuden nimi} as string,\n\t\tKarajaoikeus as string,\n\t\t{Karajaoikeuden nimi} as string\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false) ~> source1\nsource1 sink(input(\n\t\tPostinumeroalue as string,\n\t\t{Postinumeroalueen nimi} as string,\n\t\tKuntakoodi as string,\n\t\t{Kunnan nimi} as string,\n\t\tKuntaryhmakoodi as string,\n\t\t{Kuntaryhman nimi} as string,\n\t\tSeutukuntakoodi as string,\n\t\t{Seutukunnan nimi} as string,\n\t\tMaakuntakoodi as string,\n\t\t{Maakunnan nimi} as string,\n\t\tSuuraluekoodi as string,\n\t\t{Suuralueen nimi} as string\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tdeletable:false,\n\tinsertable:true,\n\tupdateable:false,\n\tupsertable:false,\n\tformat: 'table',\n\tmapColumn(\n\t\tPostinumeroalue,\n\t\t{Postinumeroalueen nimi},\n\t\tKuntakoodi = Kunta,\n\t\t{Kunnan nimi},\n\t\tKuntaryhmakoodi = Kuntaryhma,\n\t\t{Kuntaryhman nimi},\n\t\tSeutukuntakoodi = Seutukunta,\n\t\t{Seutukunnan nimi},\n\t\tMaakuntakoodi = Maakunta,\n\t\t{Maakunnan nimi},\n\t\tSuuraluekoodi = Suuralue,\n\t\t{Suuralueen nimi}\n\t)) ~> sink1"
				}
			},
			"dependsOn": []
		}
	]
}